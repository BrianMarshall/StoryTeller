<html>
	<head>
		<title>StoryTeller</title>
		<style>
body { margin: 0; padding: 50px; background-color: #666666; ; color: #666666; }
h1 {margin: 0; padding: 0;}
.page {	display: none;}
.error {color: #FF0000;}
.header {margin: 0; padding: 5px 10px 5px 10px; background-color: #000000; border-radius: 25px 25px 0 0; }
.StoryTeller { margin: 0; padding: 20px; background-color: #FFFFFF; border-style: solid; border-width: 1px; border-color: #000000; border-radius: 0 0 25px 25px; }
table {margin: 0 0 0 50px; border-collapse:collapse;}
td { text-align: right; border: 1px solid black;}
		</style>        
        <script type="text/javascript"  src="util.js"></script>
        <script type="text/javascript"  src="types.js"></script>
        <script type="text/javascript"  src="random.js"></script>
        <script type="text/javascript"  src="base64.js"></script>
        <script type="text/javascript"  src="state.js"></script>
		<script type="text/javascript"  src="compiler.js"></script>
		<script type="text/javascript"  src="core.js"></script>
		<script type="text/javascript"> 	        
var variables = [
    { name : "variablesPageViews", value : new IntegerVariable(0, 21, 0, false) },
    { name : "detail", value : new BooleanVariable(false) }
];
		</script>
	</head>
	<body>    
        <div class="header">
            <h1>StoryTeller</h1>
        </div>
        <div class="StoryTeller"></div>
        <div id="contents" class="page">
            <hr/>
            <ol>
                <li>[if(currentPage() equal "start")]<b>Introduction</b>[else][link("start")]Introduction[end][end]</li>
                <li>[if(currentPage() equal "gettingStarted")]<b>Getting Started</b>[else][link("gettingStarted")]Getting Started[end][end]</li>
                <li>[if(currentPage() equal "pages")]<b>Pages</b>[else][link("pages")]Pages[end][end]</li>
                <li>[if(currentPage() equal "links")]<b>Links</b>[else][link("links")]Links[end][end]</li>
                <li>[if(currentPage() equal "includes")]<b>Including One Page In Another</b>[else][link("includes")]Including One Page In Another[end][end]</li>
				<li>[if(currentPage() equal "decoration")]<b>Decorating Your Story</b>[else][link("decoration")]Decorating Your Story[end][end]</li>
				<li>[if(currentPage() equal "variables")]<b>Variables</b>[else][link("variables")]Variables[end][end]</li>
                <li>[if(currentPage() equal "usingVariables")]<b>Using Variables</b>[else][link("usingVariables")]Using Variables[end][end]</li>
            </ol>
        </div>
        <div id="start" class="page">
            <h2>Introduction</h2>
            <p>StoryTeller is a JavaScript application which allows you to create simple interactive stories as HTML documents.</p>
            <p>This document was created using StoryTeller. It will serve as both an example and a reference.</p>
            [include("contents")]
        </div>
        <div id="gettingStarted" class="page">
            <h2>Getting Started</h2>
            <p>To begin you will need to create a new text file with a .html extension.</p>
            <p>Next, copy the following HTML to create an empty story.</p>
            <pre>
&lt;html&gt;
  &lt;head&gt;
    &lt;style&gt;
      .page {display: none;}
    &lt;/style&gt;        
    &lt;script type="text/javascript"  src="storyteller.js"&gt;&lt;/script&gt;
  &lt;/head&gt;
  &lt;body&gt;    
    &lt;div id="start" class="page"&gt;    
    &lt;/div&gt;
  &lt;/body&gt;
&lt;/html&gt;                
            </pre>            
            [include("contents")]
        </div> 
        <div id="pages" class="page">
            <h2>Pages</h2>
            <p>Like a book, your story will consist of a number of pages.</p>
            <p>Each page is an element (generally a &lt;div&gt;) with the class "page". It is important that this class be set, otherwise StoryTeller will not recognise it as a page.</p>
            <p>Every page in your story must have a unique id.</p>
            <p>Example:<p>
            <pre>
&lt;div id="start" class="page"&gt;
  &lt;h3&gt;Welcome to my story!&lt;/h3&gt;
&lt;/div&gt;           
            </pre>
            <p>This is a page with the id "start". It will show the message "Welcome to my story!" You can include any HTML elements you like to structure the content of your pages.</p>
			<p>Styling can be done with CSS just like any other HTML document. However, make sure that you keep ".page {display: none;}" in the &lt;style&gt; element. This ensures that the reader won't see the unprocessed pages of your story.</p>
            <p>"start" is a special id. If indicated to StoryTeller that this page is the start of the first one a reader should see. If no "start" page is found StoryTeller will use the first page in the document.</p>
            [include("contents")]
        </div>
        <div id="links" class="page">
            <h2>Links</h2>
            <p>In order to allow you reader to make choices you must add links from the current page to other pages in the story.</p>
            <p>A link is added like this: [[link("{pageId}")]]{linkBody}[[end]]</p>
            <p>Replace {pageId} with the id of the page you are linking to and {linkBody} with the content you want to display as the link.</p>
            <p>Example:<p>
            <pre>
&lt;div id="start" class="page"&gt;
  &lt;h3&gt;Welcome to my story!&lt;/h3&gt;
  [[link("page2")]]next page[[end]]
&lt;/div&gt;     
&lt;div id="page2" class="page"&gt;
  The End
&lt;/div&gt;   
            </pre>
            <p>This example has two pages, "start" and "page2". The link will take the reader from "start" to "page2" when they click on the text "next page"</p>
            [include("contents")]
        </div>
        <div id="includes" class="page">
            <h2>Including One Page In Another</h2>
            <p>Sometimes you'll have content which you want to show on a number of different pages.</p>
			<p>The [[include("{pageId}")]] command will display the content of another page as though it was a part of the current page. Just replace {pageId} with the id of the page to be included</p>
            <p>Example:<p>
            <pre>
&lt;div id="start" class="page"&gt;
  &lt;h3&gt;Welcome to my story!&lt;/h3&gt;
  [[include("subpage")]]
&lt;/div&gt;     
&lt;div id="subpage" class="page"&gt;
  I hope you like it.
&lt;/div&gt;   
            </pre>	
			<p>This will display "Welcome to my story!" and "I hope you like it." all on one page.</p>
            [include("contents")]
        </div>
		<div id="decoration" class="page">
            <h2>Decorating Your Story</h2>
            <p>You can add some style to your story with CSS but to achieve the look you want you may need to use HTML elements like &lt;div&gt;s</p>
            <p>By default, StoryTeller replaces the entire content of the &lt;body&gt; element with the current page. This will overwrite any extra elements you might have added.</p>
            <p>In order to avoid this, you must tell StoryTeller to use a specific element to display pages. This is done by giving that element (usually a &lt;div&gt;) the class "StoryTeller". The pages will be displayed inside this element and the content outside of it will remain unaltered.</p>
			<p>Example:</p>
            <pre>
&lt;html&gt;
  &lt;head&gt;
    &lt;style&gt;
      .page {display: none;}
      .banner {background-color: #000000; color: #FFFFFF;}
    &lt;/style&gt;        
    &lt;script type="text/javascript"  src="storyteller.js"&gt;&lt;/script&gt;
  &lt;/head&gt;
  &lt;body&gt;
    &lt;div class="banner"&gt;
        &lt;h1&gt;My Story&lt;/h1&gt;
    &lt;/div&gt;
    &lt;div class="StoryTeller"&gt;
        &lt;div id="start" class="page"&gt;
            Welcome
        &lt;/div&gt;
    &lt;/div&gt;
  &lt;/body&gt;
&lt;/html&gt;    
            </pre>
            <p>This story will have a permanent header which reads "My Story". The pages can be defined anywhere in the &lt;body&gt;. They won't be visible anyway. However, it may be most convenient to keep them inside the "StoryTeller" element.</p>
            [include("contents")]
        </div>
		<div id="variables" class="page">
            <h2>Variables</h2>
			[variablesPageViews=variablesPageViews+1]
			<p>Variables allow your story can remember what has happened so far. This information can be used to change the content of a page.</p>
			<p>For example. <b>[if(variablesPageViews equal 1)]This is your first visit to this page[else if(variablesPageViews lessThanOrEqual 20)]You've seen this page [variablesPageViews] times[else]You've seen this page more than 20 times[end] since you opened this document.</b></p>
			<p>Before you can use these variables in your pages, they must be declared in a &lt;script&gt; element after the existing &lt;script type="text/javascript"  src="storyteller.js"&gt;&lt;/script&gt; element.</p>
			<p>Example:</p>
			<pre>
&lt;script type="text/javascript"  src="storyteller.js"&gt;&lt;/script&gt;
&ltscript type="text/javascript"&gt; 	
  var variables = [[
    { name : "myBoolean", value : new BooleanVariable(true) },
    { name : "myNumber", value : new NumberVariable(0) },    
    { name : "myInteger1", value : new IntegerVariable(0, 100, 0, false) },
    { name : "myInteger2", value : new IntegerVariable(1, 10, 10, true) }
  ]];		
&lt;/script&gt;
			</pre>
            <p>This is a JavaScript array containing a coma-separated list of variable definitions. Each entry takes the form { name : "{variableName}", value : new {variableType}({arguments}) }.</p>
            <p>{variableName} is the name which will identify this variable. It may only contain letters, numbers and underscores ('_') and the first character must not be a number.</p>
            <p>There are three possibilities for {variableType}.</p>
            <p>A BooleanVariable can cold either true or false. It takes one argument, the value it initially holds.</p>
            <p>A NumberVariable can hold numbers with fractional parts (like 3.14159 or 0.00001). It can also hold very large numbers. It also takes its initial value as its only argument.</p>
            <p>An IntegerVariable can hold whole numbers in a limited range. It has 4 arguments ({minimumValue}, {maximumValue}, {initialValue}, {wrap}). {minimumValue}  and {maximumValue} define the range of values which this variable can hold. {initialValue} sets the value which the variable will start as. 
            <p>{wrap} tells the varaible what to do when you try to put a number too big or too small into the variable. If it is false, then then any value less than {minimumValue} will become {minimumValue} and any value greater than {maximumValue} will become {maximumValue}. If it is true then the value will wrap around. For example, myInteger2 has {minimumValue}=1 and {maximumValue}=10. If you try to set the value 11. It will become 1. 23 will become 3 and -1 will become 9.</p>
            [if(detail)]
            <p><i>The following might get slightly technical. It's not that important and you can skip it if you like.</i> [link("variables")][detail=false]Click here to hide the technical stuff.[end]</p>
            <p>The value of each variable is maintained in the address bar of the reader's web browser. As you read this document you can see a random-looking string of characters after the file name (starting with '#'). This allows the reader to bookmark any position in the story and return to it later without losing the state of they variables. The space in the address bar is limited. That limit varies from browser to browser but the address (including everything before the '#' too) can safely be up to 2000 characters long.</p>
            <p>Each variable you create will add to the length. BooleanVariables are the smallest. 6 of them can fit in one character on the address bar. NumberVariables are the largest each will take up to 11 characters (Actually it's slightly less than that, 3 NumberVaraibles will be packed into 32 characters).</p>
            <p>The size of an IntegerVariable depends on the range of values it can hold. The following table show some of the possible sizes.</p>
            <table>
                <tr><th>Range</th><th>Characters</th></tr>
                <tr><td>64</td><td>1</td></tr>
                <tr><td>4 096</td><td>2</td></tr>
                <tr><td>262 144</td><td>3</td></tr>
                <tr><td>16 777 216</td><td>4</td></tr>
                <tr><td>1 073 741 824</td><td>5</td></tr>
            </table>
            <p>For example. IntegerVariable(0,63,0,false) can hold 64 different values so it will need 1 character in the address bar to hold its state.</p>
            [else]
            <p><i>There are some slightly technical details hidden here. You don't really need to read it.</i> [link("variables")][detail=true]Click here to show the technical stuff.[end]</p>
            [end]
			[include("contents")]
		</div>
        <div id="usingVariables" class="page">
            <h2>Using Variables</h2>
            <p>Once you have declared a variable, you can use it in your pages. To display the value of a variable simply write its name in square brackets: [[{varaibleName}]]<p>
            <p>For example, if you declare a variable named myInteger:</p>
            <pre>
var variables = [[
  { name : "myInteger", value : new IntegerVariable(0, 255, 42, false) }
]]; 
            </pre>
            <p>You can use it in a page like this:</p>
            <pre>
            </pre>
            [include("contents")]
        </div>
	</body>
</html>